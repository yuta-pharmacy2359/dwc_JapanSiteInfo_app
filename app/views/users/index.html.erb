<h2>ユーザー一覧</h2>

<%= search_form_for @q do |f| %>
  <%= f.label "都道府県" %>
  <%= f.select :prefecture_eq, User.prefectures.map{|k, v| [User.prefectures_i18n[k], v]}, :include_blank => '指定なし' %>

  <%= f.label "市区町村" %>
  <%= f.search_field :city_cont %>

  <%= f.label "性別" %>
  <%= f.label "指定なし" %>
  <%= f.radio_button :sex_eq, '', { :checked => true } %>
  <%= f.label "男性" %>
  <%= f.radio_button :sex_eq, 0 %>
  <%= f.label "女性" %>
  <%= f.radio_button :sex_eq, 1 %>

  <%= f.label "年齢" %>
  <%= f.search_field :birthday_to_age_gteq %>歳以上<%= f.search_field :birthday_to_age_lt %>歳未満

  <%= f.label "ニックネーム" %>
  <%= f.search_field :nickname %>

  <%= f.submit "検索" %>
<% end %>

<p>
  全<%= @users.total_count %>件中、<%= @users.offset_value + 1 %>〜<%= @users.offset_value + @users.length %>件目を表示(<%= @users.current_page %>/<%= @users.total_pages %>ページ)
</p>

<% @users.each do |user| %>
  <div>
    <div>
      フォト：
      <%= attachment_image_tag user, :profile_image, format: "jpeg", fallback: "noimage-1-760x460.png", size: "100x100" %>
    </div>
    <p>
      ニックネーム：
      <%= link_to user_path(user) do %>
        <%= user.nickname %>
      <% end %>
    </p>
    <p>年齢：<%= user.age %></p>
    <p>性別：<%= user.sex %></p>
    <p>都道府県：<%= user.prefecture %></p>
    <p>市区町村：<%= user.city %></p>
    <p>投稿数：<%= user.spots.count %></p>
    <p>
      フォロー数：
      <a href="<%= following_user_path(user) %>">
        <%= user.following.count %>
      </a>
    </p>
    <p>
      フォロワー数：
      <a href="<%= followers_user_path(user) %>", class="followers">
        <%= user.followers.count %>
      </a>
    </p>
  </div>
<% end %>
