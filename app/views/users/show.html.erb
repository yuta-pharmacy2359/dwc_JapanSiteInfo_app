<% if current_user.present? && (@user.id == current_user.id) %>
  <h2>マイページ</h2>
<% else %>
  <h2><%= @user.nickname %> さん</h2>
<% end %>

<div>
  <%= attachment_image_tag @user, :profile_image, format: "jpeg", fallback: "noimage-1-760x460.png", size: "100x100" %>
  <p>ニックネーム: <%= @user.nickname %></p>
  <p>性別: <%= @user.sex.to_s %></p>
  <p>年齢: <%= @user.age %>歳</p>
  <p>住所: <%= @user.prefecture %><%= @user.city %></p>
  <p>自己紹介: <%= @user.introduction %></p>
</div>

<% if current_user.present? && (@user.id == current_user.id) %>
  <%= link_to "プロフィール編集", edit_user_path(@user) %>
<% end %>

<div>
  <h3>スポット一覧</h3>
  <% @spots.each do |spot| %>
    <%= attachment_image_tag spot, :spot_image1, format: "jpeg", fallback: "noimage-1-760x460.png", size: "100x100" %>
    <p>
      <%= link_to spot_path(spot) do %>
        <%= spot.title %>
      <% end %>
    </p>
    <p>都道府県: <%= spot.prefecture %></p>
    <p>市区町村: <%= spot.city %></p>
    <p>投稿日: <%= spot.created_at.strftime("%Y年%-m月%-d日") %></p>
    <p>
      <% if spot.visited_day.nil? %>
        来訪日: 不明
      <% else %>
        来訪日: <%= spot.visited_day.strftime("%Y年%-m月%-d日") %>
      <% end %>
    </p>
    <% if spot.rate.nil? %>
      <p>無評価</p>
    <% else %>
      <p id="star-rate-<%= spot.id %>"></p>
      <script>
        $('#star-rate-<%= spot.id %>').raty({
          size: 36,
          starOff: '<%= asset_path('star-off.png') %>',
          starOn: '<%= asset_path('star-on.png') %>',
          readOnly: true,
          score: <%= spot.rate %>,
        });
      </script>
    <% end %>
    <div class="favorite-<%= spot.id %>">
      <%= render "favorites/list_favorite", spot: spot %>
    </div>
  <% end %>
  <%= paginate @spots %>
</div>